// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id                      String     @id @default(cuid())
  name                    String     @default("")
  email                   String     @unique @default("")
  password                String?
  isAdmin                 Boolean    @default(false)
  createdAt               DateTime?  @default(now())
  from_Dict_createdBy     Dict[]     @relation("Dict_createdBy")
  from_DictItem_createdBy DictItem[] @relation("DictItem_createdBy")
}

model Topik {
  id              String                @id @default(cuid())
  no              Int
  year            Int
  level           TopikLevelType
  parentId        Topik?                @relation("Topik_parentId", fields: [parentIdId], references: [id])
  parentIdId      String?               @map("parentId")
  childrenId      Topik[]               @relation("Topik_parentId")
  questionNumber  Int
  questionType    TopikQuestionTypeType
  score           Int                   @default(0)
  audioURL        String                @default("")
  questionStem    String                @default("")
  questionContent String                @default("")
  options         Json?                 @default("[{\"content\":\"\",\"isCorrect\":true},{\"content\":\"\"},{\"content\":\"\"},{\"content\":\"\"}]")
  explanation     String                @default("")
  createdAt       DateTime?             @default(now())

  @@index([parentIdId])
}

model Dict {
  id          String     @id @default(cuid())
  name        String     @default("")
  public      Boolean    @default(false)
  intlKey     String     @default("")
  createdAt   DateTime?  @default(now())
  createdBy   User?      @relation("Dict_createdBy", fields: [createdById], references: [id])
  createdById String?    @map("createdBy")
  list        DictItem[] @relation("Dict_list")

  @@index([createdById])
}

model DictItem {
  id          String    @id @default(cuid())
  name        String    @default("")
  trans       Json?     @default("{\"en\":[\"\"],\"zh-CN\":[\"\"],\"zh-TW\":[\"\"],\"ja\":[\"\"]}")
  example     String    @default("")
  exTrans     Json?     @default("{\"en\":[\"\"],\"zh-CN\":[\"\"],\"zh-TW\":[\"\"],\"ja\":[\"\"]}")
  createdAt   DateTime? @default(now())
  createdBy   User?     @relation("DictItem_createdBy", fields: [createdById], references: [id])
  createdById String?   @map("createdBy")
  dict        Dict[]    @relation("Dict_list")

  @@index([createdById])
}

enum TopikLevelType {
  TOPIK_I
  TOPIK_II
}

enum TopikQuestionTypeType {
  LISTENING
  READING
  WRITING
}
